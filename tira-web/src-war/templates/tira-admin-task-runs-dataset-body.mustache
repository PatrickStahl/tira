{{#hasRuns}}
{{#runsList}}
<div id="runs" class="row">
  <div class="col-xs-12">
    <div class="tira-panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><span class="glyphicon glyphicon-folder-open"></span> Dataset <em>{{> tira-widget-dataset-name-body}}</em></h3>
      </div>
      <div class="table-responsive webis-data-table" style="overflow:auto;">
        <table id="runs-table-{{dataset}}" class="runs-table table table-condensed table-hover sortable targetable">
          <thead>
            <tr>
              <th>User&nbsp;</th>
              <th>Software&nbsp;</th>
              <th class="sort-desc">Run&nbsp;</th>
              <th>Input run&nbsp;</th>
              <th>Size&nbsp;</th>
              <th>Lines&nbsp;</th>
              <th>Files&nbsp;</th>
              <th>Dirs&nbsp;</th>
              <th>Review&nbsp;</th>
              <th class="no-sort">Actions</th>
            </tr>
          </thead>
          <tbody>
            {{#runsList}}
            {{#run}}
            {{#hasReview}}
            {{#runReview}}
            {{#hasNoErrors}}
            <tr class="success">
            {{/hasNoErrors}}
            {{^hasNoErrors}}
            {{#hasErrors}}
            <tr class="danger">
            {{/hasErrors}}
            {{^hasErrors}}
            {{#hasWarnings}}
            <tr class="warning">
            {{/hasWarnings}}
            {{^hasWarnings}}
            <tr>
            {{/hasWarnings}}
            {{/hasErrors}}
            {{/hasNoErrors}}
            {{/runReview}}
            {{/hasReview}}
            {{^hasReview}}
            {{#isRunning}}
            <tr class="active">
            {{/isRunning}}
            {{^isRunning}}
            <tr>
            {{/isRunning}}
            {{/hasReview}}
              <td style="white-space:nowrap;">{{user.userName}}</td>
              <td data-order="{{softwareId}}" {{#softwareDeprecated}}title="deprecated"{{/softwareDeprecated}}>{{> tira-widget-software-name-body}}</td>
              <td data-order="{{runId}}" style="white-space:nowrap;" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>{{> tira-widget-run-name-body}}</td>
              {{#hasInputRun}}
              {{#inputRun.hasReview}}
              {{#inputRun.runReview.hasNoErrors}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="success" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasNoErrors}}
              {{^inputRun.runReview.hasNoErrors}}
              {{#inputRun.runReview.hasErrors}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="danger" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasErrors}}
              {{^inputRun.runReview.hasErrors}}
              {{#inputRun.runReview.hasWarnings}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="warning" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasWarnings}}
              {{^inputRun.runReview.hasWarnings}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasWarnings}}
              {{/inputRun.runReview.hasErrors}}
              {{/inputRun.runReview.hasNoErrors}}
              {{/inputRun.hasReview}}
              {{^inputRun.hasReview}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.hasReview}}
              {{/hasInputRun}}
              {{^hasInputRun}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/hasInputRun}}
                {{> tira-widget-run-name2-body}}
              </td>
              <td style="white-space:nowrap;" data-sort="{{sizeInBytes}}">{{size}}</td>
              <td style="white-space:nowrap;">{{numLines}}</td>
              <td style="white-space:nowrap;">{{numFiles}}</td>
              <td style="white-space:nowrap;">{{numDirectories}}</td>
              <td style="white-space:nowrap;">{{#hasReview}}done{{/hasReview}}{{^hasReview}}<strong>todo</strong>{{/hasReview}}</td>
              <td style="white-space:nowrap;">
                {{#isRunning}}
                <span data-toggle="tooltip" data-placement="left" title="Review disabled since the run is not finished, yet."><span style="font-size:larger;color:grey;" class="glyphicon glyphicon-eye-open text-primary"></span></span>
                <span data-toggle="tooltip" data-placement="left" title="Download disabled since the run is not finished, yet."><span style="font-size:larger;color:grey;" class="glyphicon glyphicon-download"></span></span>
                {{/isRunning}}
                {{^isRunning}}
                <a href="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/view/" title="Review"><span style="font-size:larger;" class="glyphicon glyphicon-eye-open text-primary"></span></a>
                <a href="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}.zip" title="Download" target="_blank"><span style="font-size:larger;color:black;" class="glyphicon glyphicon-download"></span></a>
                <span class="tira-user-blinding">
                  <form id="unblind-{{user.userName}}-{{runId}}" class="form-inline unblind" style="{{#runReview.blinded}}display:inline{{/runReview.blinded}}{{^runReview.blinded}}display:none{{/runReview.blinded}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/unblind/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Unblind">
                      <span style="font-size:larger;" class="text-success glyphicon glyphicon-user"></span>
                    </button>
                  </form>
                  <form id="blind-{{user.userName}}-{{runId}}" class="form-inline blind" style="{{#runReview.blinded}}display:none{{/runReview.blinded}}{{^runReview.blinded}}display:inline{{/runReview.blinded}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/blind/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Blind">
                      <span style="font-size:larger;" class="text-danger glyphicon glyphicon-user"></span>
                    </button>
                  </form>
                </span>
                {{/isRunning}}
              </td>
            </tr>
            {{/run}}
            {{/runsList}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div><!-- /.row -->
{{/runsList}}
{{/hasRuns}}
{{^hasRuns}}
<div id="runs" class="row">
  <div class="col-xs-12">
    <div class="text-center well well-lg">No runs, yet.</div>
  </div>
</div><!-- /.row -->
{{/hasRuns}}
<script charset="utf-8">
    initWebisTableFiltering(document.querySelectorAll(".targetable"), true, entry => {
        const attributes = entry.dataset;
        attributes['user'] = normalize(entry.children[0].textContent);
        attributes['software'] = normalize(entry.children[1].textContent);
        attributes['run'] = normalize(entry.children[2].textContent);
        attributes['inputRun'] = normalize(entry.children[3].textContent);
        attributes['size'] = normalize(entry.children[4].textContent);
        attributes['lines'] = normalize(entry.children[5].textContent);
        attributes['files'] = normalize(entry.children[6].textContent);
        attributes['dirs'] = normalize(entry.children[7].textContent);
        attributes['review'] = normalize(entry.children[8].textContent);
        attributes['actions'] = normalize(entry.children[9].textContent);
        return attributes;
    });
    initTableSorting();
</script>
