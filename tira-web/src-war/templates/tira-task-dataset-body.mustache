<div class="row">
  <div class="col-xs-12">
    <h1>{{taskName}} <small>Evaluation Results</small></h1>
  </div>
</div>
{{> tira-task-user-toolbar-body}}
{{> tira-admin-task-evaluations-body}}

{{#hasEvaluatorRuns}}
{{#evaluatorRunsList}}
<div id="runs" class="row">
  <div class="col-xs-12">
    <div class="tira-panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><span class="glyphicon glyphicon-folder-close"></span> Evaluations on <em>{{> tira-widget-dataset-name-body}}</em></h3>
      </div>
      <div class="table-responsive" style="overflow:auto;">
        <table id="runs-table-{{dataset}}" class="evaluation-table table table-condensed table-hover">
          <thead>
            <tr>
              <th class="sort-desc">User&nbsp;</th>
              {{#isReviewer}}
              <th class="no-sort">Actions</th>
              {{/isReviewer}}
              <th>Software&nbsp;</th>
              <th>Run&nbsp;</th>
              <th>Input run&nbsp;</th>
              {{#measureKeysList}}
              <th>{{.}}&nbsp;</th>
              {{/measureKeysList}}
              <th>Runtime&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            {{#runsList}}
            {{#run}}
            <tr>
              <td style="white-space:nowrap;">{{user.userName}}</td>
              {{#isReviewer}}
              <td style="white-space:nowrap;">
                {{#isRunning}}
                <span data-toggle="tooltip" data-placement="left" title="Review disabled since the run is not finished, yet.">
                  <span style="font-size:larger;" class="text-muted glyphicon glyphicon-eye-open text-primary"></span>
                </span>
                <span data-toggle="tooltip" data-placement="left" title="Download disabled since the run is not finished, yet.">
                  <span style="font-size:larger;" class="text-muted glyphicon glyphicon-download"></span>
                </span>
                {{/isRunning}}
                {{^isRunning}}
                <a href="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/view/" title="Review">
                  <span style="font-size:larger;" class="text-primary glyphicon glyphicon-eye-open text-primary"></span>
                </a>
                <a href="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}.zip" title="Download run" target="_blank">
                  <span style="font-size:larger;color:black;" class="glyphicon glyphicon-download"></span>
                </a>
                <a href="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{inputRun}}.zip" title="Download input run" target="_blank">
                  <span style="font-size:larger;color:black;" class="glyphicon glyphicon-download"></span>
                </a>
                <span class="tira-world-publish">
                  <form id="unpublish-{{user.userName}}-{{runId}}" class="form-inline unpublish" style="{{#runReview.published}}display:inline{{/runReview.published}}{{^runReview.published}}display:none{{/runReview.published}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/unpublish/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Unpublish">
                      <span style="font-size:larger;" class="text-danger glyphicon glyphicon-globe"></span>
                    </button>
                  </form>
                  <form id="publish-{{user.userName}}-{{runId}}" class="form-inline publish" style="{{#runReview.published}}display:none{{/runReview.published}}{{^runReview.published}}display:inline{{/runReview.published}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/publish/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Publish">
                      <span style="font-size:larger;" class="text-success glyphicon glyphicon-globe"></span>
                    </button>
                  </form>
                </span>
                <span class="tira-user-blinding">
                  <form id="unblind-{{user.userName}}-{{runId}}" class="form-inline unblind" style="{{#runReview.blinded}}display:inline{{/runReview.blinded}}{{^runReview.blinded}}display:none{{/runReview.blinded}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/unblind/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Unblind">
                      <span style="font-size:larger;" class="text-success glyphicon glyphicon-user"></span>
                    </button>
                  </form>
                  <form id="blind-{{user.userName}}-{{runId}}" class="form-inline blind" style="{{#runReview.blinded}}display:none{{/runReview.blinded}}{{^runReview.blinded}}display:inline{{/runReview.blinded}}" role="form" action="{{contextPath}}/tira/admin/task/{{task.taskId}}/evaluations/user/{{user.userName}}/run/{{runId}}/blind/" method="POST">
                    <button type="submit" class="btn btn-link" style="border:none;display:inline;padding:0;margin-top:-4px;" title="Blind">
                      <span style="font-size:larger;" class="text-danger glyphicon glyphicon-user"></span>
                    </button>
                  </form>
                </span>
                {{/isRunning}}
              </td>
              {{/isReviewer}}
              <td data-order="{{softwareId}}" style="white-space:nowrap;" {{#softwareDeprecated}}title="deprecated"{{/softwareDeprecated}}>
                {{> tira-widget-software-name2-body}}
              </td>
              {{#isReviewer}}
              {{#hasReview}}
              {{#runReview}}
              {{#hasNoErrors}}
              <td data-order="{{runId}}" style="white-space:nowrap;" class="success" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/hasNoErrors}}
              {{^hasNoErrors}}
              {{#hasErrors}}
              <td data-order="{{runId}}" style="white-space:nowrap;" class="danger" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/hasErrors}}
              {{^hasErrors}}
              {{#hasWarnings}}
              <td data-order="{{runId}}" style="white-space:nowrap;" class="warning" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/hasWarnings}}
              {{^hasWarnings}}
              <td data-order="{{runId}}" style="white-space:nowrap;" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/hasWarnings}}
              {{/hasErrors}}
              {{/hasNoErrors}}
              {{/runReview}}
              {{/hasReview}}
              {{^hasReview}}
              {{#isRunning}}
              <td data-order="{{runId}}" style="white-space:nowrap;" class="active" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/isRunning}}
              {{^isRunning}}
              <td data-order="{{runId}}" style="white-space:nowrap;" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/isRunning}}
              {{/hasReview}}
              {{/isReviewer}}
              {{^isReviewer}}
              {{#isRunning}}
              <td data-order="{{runId}}" style="white-space:nowrap;" class="active" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/isRunning}}
              {{^isRunning}}
              <td data-order="{{runId}}" style="white-space:nowrap;" {{#isDeprecated}}title="deprecated"{{/isDeprecated}}>
              {{/isRunning}}
              {{/isReviewer}}
                {{> tira-widget-run-name-body}}
              </td>
              {{#hasInputRun}}
              {{#isReviewer}}
              {{#inputRun.hasReview}}
              {{#inputRun.runReview.hasNoErrors}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="success" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasNoErrors}}
              {{^inputRun.runReview.hasNoErrors}}
              {{#inputRun.runReview.hasErrors}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="danger" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasErrors}}
              {{^inputRun.runReview.hasErrors}}
              {{#inputRun.runReview.hasWarnings}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" class="warning" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasWarnings}}
              {{^inputRun.runReview.hasWarnings}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.runReview.hasWarnings}}
              {{/inputRun.runReview.hasErrors}}
              {{/inputRun.runReview.hasNoErrors}}
              {{/inputRun.hasReview}}
              {{^inputRun.hasReview}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/inputRun.hasReview}}
              {{/isReviewer}}
              {{^isReviewer}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/isReviewer}}
              {{/hasInputRun}}
              {{^hasInputRun}}
              <td data-order="{{inputRun}}" style="white-space:nowrap;" {{#inputRun.isDeprecated}}title="deprecated"{{/inputRun.isDeprecated}}>
              {{/hasInputRun}}
                {{> tira-widget-run-name2-body}}
              </td>
              {{#evaluation.measureList}}
              <td style="white-space:nowrap;">{{value}}</td>
              {{/evaluation.measureList}}
              <td style="white-space:nowrap;">{{inputRun.runtime}}</td>
            </tr>
            {{/run}}
            {{/runsList}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div><!-- /.row -->
{{/evaluatorRunsList}}
{{/hasEvaluatorRuns}}
{{^hasEvaluatorRuns}}
<div id="runs" class="row">
  <div class="col-xs-12">
    <div class="text-center well well-lg">No evaluation results published, yet.</div>
  </div>
</div><!-- /.row -->
{{/hasEvaluatorRuns}}

